<div class="">
	<h2>Versão NETSMS</h2>
	<div class="alert alert-{{message.status}}" ng-repeat="message in messages">
		<strong ng-bind="message.title"></strong> {{message.text}}
	</div>
	<div ng-show="progress" class="animate-show-hide">
		<div style="opacity:0.7; background-color: #000; width: 100%; height: 100%; position: absolute; display: inline-block;  top: 0px; left: 0px;"></div>
		<div style="width: 100%; height: 100%; position: absolute; display: inline-block;  top: 0px; left: 0px; padding-top: 200px;">
		
			<div style="width: 340px; height: 120px;  background-color: #fff; padding: 20px; border: 3px #ccc solid; margin: auto; 
			-webkit-border-radius: 8px;
			-moz-border-radius: 8px;
			border-radius: 8px;">
				<center>
					<div class="text-primary">Carregando {{progress*100| number :0}}%
					</div>
				</center>
				<br>
				<div class="progress" >
					<div class="progress-bar progress-bar-striped bg-info text-dark" style="width:{{progress*100| number :0}}%"></div>
				</div>
			</div>
		
		</div>
	</div>
	
	<div>
		<button type="button" ng-click="exportData()" class="btn btn-light" title="Exportar para Planilha do Excel"> <i class="fas fa-file-excel text-primary"> </i> Exportar</button>
		
		
		<table class="table table-bordered table-sm">
		<thead class="thead-dark">
		<tr>
			<th style="width: 15%">Ambiente \ Cenario </th>
			<th ng-repeat="cenario in cenarios" ng-bind="cenario.code" ng-style="{'width': {{(100-15)/cenarios.length}}+'%'}"></th>
		</tr>
		</thead>
		<tbody>
		<tr ng-repeat="environment in environments">
		<td style="padding: 0px">
		<div style="width: 100%;height: 100%; margin: 0px; padding: 4px;" ng-bind="environment.code"></div>
		</td>
		<td style="padding: 0px" ng-repeat="cenario in cenarios" ng-init="datasource = getItem({cenarioCode: cenario.code, environmentCode: environment.code}, datasources)"  >
			
			<!-- c_st_lowerversion -->
			<div 
			ng-if="datasource.status=='W'" 
			style="width: 100%;height: 100%; margin: 0px; padding: 4px;" 
			class="bg-danger text-white text-center" 
			ng-bind="datasource.listVersao[0].version"
			title="Datasource: {{ datasource.code }}&#13;Data de aplicação: {{ datasource.listVersao[0].applyDate | date : 'yyyy-MM-dd' }}&#13;{{datasource.mensagem}}"  
			></div>
			
			<div 
			ng-if="datasource.status=='O'" 
			style="width: 100%;height: 100%; margin: 0px; padding: 4px;" 
			class="bg-warning text-dark text-center" 
			ng-bind="datasource.listVersao[0].version"
			title="Datasource: {{ datasource.code }}&#13;Data de aplicação: {{ datasource.listVersao[0].applyDate | date : 'yyyy-MM-dd' }}&#13;{{datasource.mensagem}}"  
			></div>
			
			<!-- c_st_disabled -->
			<div 
			ng-if="datasource.status=='D'" 
			style="width: 100%;height: 100%; margin: 0px; padding: 4px;" 
			class="bg-light text-dark text-center" 
			ng-bind="datasource.listVersao[0].version"
			title="Datasource: {{ datasource.code }}&#13;Data de aplicação: {{ datasource.listVersao[0].applyDate | date : 'yyyy-MM-dd' }}&#13;{{datasource.mensagem}}"  
			></div>
			
			<div 
			ng-if="datasource.status=='E'" 
			style="width: 100%;height: 100%; margin: 0px; padding: 4px;" 
			class="bg-secondary text-warning text-center" 
			title="Datasource: {{ datasource.code }}&#13;{{datasource.mensagem}}"  
			><b>!</b></div>
			
			<!-- c_st_upperversion -->
			<div 
			ng-if="datasource.status=='F'" 
			style="width: 100%;height: 100%; margin: 0px; padding: 4px;" 
			class="bg-info text-white text-center" 
			ng-bind="datasource.listVersao[0].version"
			title="Datasource: {{ datasource.code }}&#13;Data de aplicação: {{ datasource.listVersao[0].applyDate | date : 'yyyy-MM-dd' }}&#13;{{datasource.mensagem}}"  
			></div>
			
			<div 
			ng-if="datasource.status==='L'" 
			style="width: 100%;height: 100%; margin: 0px; padding: 4px;" 
			class="bg-white text-dark text-center" 
			ng-bind="datasource.listVersao[0].version"
			title="Datasource: {{ datasource.code }}&#13;Data de aplicação: {{ datasource.listVersao[0].applyDate | date : 'yyyy-MM-dd' }}&#13;{{datasource.mensagem}}"  
			></div>
			
			
			
			<div 
			ng-if="!datasource" 
			style="width: 100%;height: 100%; margin: 0px; padding: 4px;" 
			class="bg-light text-secondary text-center" 
			title="Datasource não definido"  
			>-</div>
			
		</td>
		</tr>
		</tbody>
		</table>
		<br>
		
		
	</div>
</div>
